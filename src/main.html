<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<html>
<head>
<title>ABC AND YOU</title>

<script src="http://192.168.1.101/typedarray.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script src="http://192.168.1.101/mootools/mootools-core-1.4.5-full-compat.js"></script>
<script src="http://192.168.1.101/breslin/clientside/application/application_breslin.php"></script>
<script src="http://192.168.1.101/breslin/clientside/network/network.php"></script>
<script src="http://192.168.1.101/breslin/breslin/statemachine/state.php"></script>
<script src="http://192.168.1.101/breslin/statemachine/state_machine.php"></script>
<script src="http://192.168.1.101/breslin/clientside/application/states/application_global.php"></script>
<script src="http://192.168.1.101/breslin/clientside/application/states/application_initialize.php"></script>
<script src="http://192.168.1.101/breslin/clientside/application/states/application_main.php"></script>
<script src="http://192.168.1.101/breslin/clientside/application/states/application_play.php"></script>
<script src="http://192.168.1.101/breslin/clientside/bytebuffer/byte_buffer.php"></script>
<script src="http://192.168.1.101/breslin/clientside/game/game.php"></script>
<script src="http://192.168.1.101/breslin/clientside/game/states/game_global.php"></script>
<script src="http://192.168.1.101/breslin/clientside/game/states/game_initialize.php"></script>
<script src="http://192.168.1.101/breslin/clientside/game/states/game_pause.php"></script>
<script src="http://192.168.1.101/breslin/clientside/game/states/game_play.php"></script>
<script src="http://192.168.1.101/breslin/clientside/shape/shape.php"></script>
<script src="http://192.168.1.101/breslin/math/vector_3d.php"></script>
<script src="http://192.168.1.101/breslin/clientside/command/command.php"></script>
<script src="http://192.168.1.101/breslin/clientside/div/div.php"></script>
<script src="http://192.168.1.101/breslin/clientside/ability/ability.php"></script>
<script src="http://192.168.1.101/breslin/clientside/ability/move/ability_move.php"></script>
<script src="http://192.168.1.101/breslin/clientside/ability/move/ability_move_state.php"></script>
<script src="http://192.168.1.101/breslin/clientside/ability/move/global_process_tick_move.php"></script>
<script src="http://192.168.1.101/breslin/clientside/ability/move/catchup_process_tick_move.php"></script>
<script src="http://192.168.1.101/breslin/clientside/ability/move/normal_process_tick_move.php"></script>
<script src="http://192.168.1.101/breslin/clientside/ability/move/normal_interpolate_tick_move.php"></script>
<script src="http://192.168.1.101/breslin/clientside/ability/move/ability_move_state_machine.php"></script>

</head>

<body bgcolor="grey">

<script>

var mApplication;

window.addEvent('domready', function()
{
        mApplication = new ApplicationBreslin('192.168.1.101', 30004);

        //input
        document.addEvent("keydown", mApplication.keyDown);
        document.addEvent("keyup", mApplication.keyUp);

        //main loop
        var t=setInterval("mApplication.processUpdate()",32)
       

function pack(bytes) {
    var chars = [];
    for(var i = 0, n = bytes.length; i < n;) {
        chars.push(((bytes[i++] & 0xff) << 8) | (bytes[i++] & 0xff));
    }
    return String.fromCharCode.apply(null, chars);
}

function unpack(str) {
    var bytes = [];
    for(var i = 0, n = str.length; i < n; i++) {
        var char = str.charCodeAt(i);
        bytes.push(char >>> 8, char & 0xFF);
    }
    return bytes;
}

 
	mApplication.mNetwork.mSocket.on('news', function (data)
        {
		mApplication.log('datastring:' + data);
/*
var mask = 1 << 7;
if (data[0] & mask != 0) {
  // bit is set
			mApplication.log('yesbit');
} else {
  // bit is not set
			mApplication.log('nobit');
}
*/
/*
		var char = data[i] << 8;
		var a = ~data[0];
		var b = a>>1;
		mApplication.log('a:' + a);
		mApplication.log('b:' + b);
		mApplication.log('char:' + char);
*/		
/*
		if (data[0] == -101)
		{
			mApplication.log('message:' + data[0]);
		}
*/
            //    console.log(data);
             //   socket.emit('my other event', { my: 'data' });
	//	var typeView = new Int8Array(data,0,1);		
	//	var outgoingSequenceView = new Int8Array(data,1,2);		
	//	mApplication.log('message:' + typeView[0] + ':' + outgoingSequenceView[0]);
        });
}

);

</script>
</body>
</html>

